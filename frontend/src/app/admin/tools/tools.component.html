<nb-layout>

  <nb-layout-header>
    <nb-sidebar-toggle style="width:100vw"></nb-sidebar-toggle>
  </nb-layout-header>

  <nb-sidebar left tag="left" state="expanded">
    <nb-menu-services></nb-menu-services>
  </nb-sidebar>




  <nb-layout-column>
    
    <nb-card  [nbSpinner]="loading" nbSpinnerStatus="primary" >
     
      <nb-card-body>
        <h3>Tools settings</h3><br>
        <div class="addGrp">
          <nb-select (selectedChange)="inputForm($event)" placeholder="Select a tool" #toolSelected>
            <nb-option *ngFor="let item of this.toolsList"  value="{{item}}">{{item}}</nb-option>
          </nb-select>
          <button type="button" nbButton status="success"  (click)="createModal(toolSelected.selected)"><nb-icon icon="plus-outline" ></nb-icon></button>
        </div>

              <table >
          <tr>
            <th>Name</th>
            <th>Registered settings</th>
            <th>Action</th>

            
          </tr>
          <tr *ngFor="let item of this.tools">
            <td>{{ item.name }}</td>
            <td>{{ getKey(item.name) }}</td>

            <td>
              <div class="row actionGrp" >
                <div class="col">
                  <button type="button" (click)="updateModal(item.name)" nbButton status="success"><nb-icon icon="edit-outline" ></nb-icon></button>
                </div>
                <div class="col">
                 <!-- <button type="button" (click)="deleteToolsSettings(item.name)" nbButton status="danger"><nb-icon icon="trash-outline" ></nb-icon></button>-->
                </div>
              </div>
            </td>
          </tr>
        </table>
      </nb-card-body>

  </nb-card>
  <ng-template #dialogCreateUserPassword let-data let-ref="dialogCreateUserPassword"  >
    <nb-card  >
      <nb-card-header>Create tool config</nb-card-header>
      <nb-card-body>
        <nb-form-field>
          <form  (ngSubmit)="this.updateTools($event,'userPassword')" [formGroup]="toolsFormUserPassword">
            <div class=" modaleBth row">
              <div class="form-group row">
                <label for="inputEmail1" class="label col-sm-3 col-form-label">User</label>
                <div class="col-sm-9">
                  <input class="col" nbInput type="text" name="user" formControlName="user" >
                </div>
              </div>
              <input class="col" nbInput type="hidden" value="{{data}}" formControlName="name" >
              <div class="form-group row">
                <label for="inputEmail1" class="label col-sm-3 col-form-label">Password</label>
                <div class="col-sm-9">
                  <input class="col" nbInput type="password" name="password" formControlName="password" >
                </div>
              </div>
              <div class="col">
                <button nbButton (click)="closeModal()">Cancel</button>
              </div>
              <div class="col">
                <button type="submit" nbButton status="success">Update</button>
              </div>
            </div>
          </form>
        </nb-form-field>
      </nb-card-body>
    </nb-card>
  </ng-template>
  <ng-template #dialogCreateApiKey let-data let-ref="dialogCreateApiKey"  >
    <nb-card  >
      <nb-card-header>Create tool config</nb-card-header>
      <nb-card-body>
        <nb-form-field>
          <form  (ngSubmit)="this.updateTools($event,'apiKey')" [formGroup]="toolsFormApikey">
            <div class=" modaleBth row">
              <div class="form-group row">
                <label for="inputEmail1" class="label col-sm-3 col-form-label">Api key</label>
                <div class="col-sm-9">
                  <input class="col" nbInput type="password" name="api_key" formControlName="api_key" >
                  <input class="col" nbInput type="hidden" value="{{data}}" formControlName="name" >
                </div>
              </div>
              <div class="col">
                <button nbButton (click)="closeModal()">Cancel</button>
              </div>
              <div class="col">
                <button type="submit" nbButton status="success">Update</button>
              </div>
            </div>
          </form>
        </nb-form-field>
      </nb-card-body>
    </nb-card>
  </ng-template>
  <ng-template #dialogCreateConfig let-data let-ref="dialogCreateConfig"  >
    <nb-card  >
      <nb-card-header>Create tool config</nb-card-header>
      <nb-card-body>
        <nb-form-field>
          <form  (ngSubmit)="this.updateTools($event,'config')" [formGroup]="toolsFormConfig">
            <div class=" modaleBth row">
              <div class="form-group row">
                <label for="inputEmail1" class="label col-sm-3 col-form-label">Configuration file</label>
                <div class="col-sm-9">
                  <textarea nbInput fullWidth placeholder="Textarea" class="" formControlName="config_value" ></textarea>
                  <input class="col" nbInput type="hidden" value="{{data}}" formControlName="name" >
                </div>
              </div>
              <div class="col">
                <button nbButton (click)="closeModal()">Cancel</button>
              </div>
              <div class="col">
                <button type="submit" nbButton status="success">Update</button>
              </div>
            </div>
          </form>
        </nb-form-field>
      </nb-card-body>
    </nb-card>
  </ng-template>
  <ng-template #dialogCreateUserApikey let-data let-ref="dialogCreateUserApikey">
    <nb-card  >
      <nb-card-header>Create tool config</nb-card-header>
      <nb-card-body>
        <nb-form-field>
          <form  (ngSubmit)="this.updateTools($event,'userApikey')"  [formGroup]="toolsFormUserApiKey">
            <div class=" modaleBth row">
              <div class="form-group row">
                <label for="inputEmail1" class="label col-sm-3 col-form-label">User</label>
                <div class="col-sm-9">
                  <input class="col" nbInput type="password" name="user" formControlName="user" >
                  <input class="col" nbInput type="hidden" value="{{data}}" formControlName="name" >
                </div>
              </div>
              <div class="form-group row">
                <label for="inputEmail1" class="label col-sm-3 col-form-label">Api Key</label>
                <div class="col-sm-9">
                  <input class="col" nbInput type="password" name="api_key" formControlName="api_key" >
                </div>
              </div>
              <div class="col">
                <button nbButton (click)="closeModal()">Cancel</button>
              </div>
              <div class="col">
                <button type="submit" nbButton status="success">Update</button>
              </div>
            </div>
          </form>
        </nb-form-field>
      </nb-card-body>
    </nb-card>
  </ng-template>
  <ng-template #dialogCreateUrlApikey let-data let-ref="dialogCreateUrlApikey">
    <nb-card  >
      <nb-card-header>Create tool config</nb-card-header>
      <nb-card-body>
        <nb-form-field>
          <form  (ngSubmit)="this.updateTools($event,'UrlApikey')"  [formGroup]="toolsFormUrlApiKey">
            <div class=" modaleBth row">
              <div class="form-group row">
                <label for="inputEmail1" class="label col-sm-3 col-form-label">URL</label>
                <div class="col-sm-9">
                  <input class="col" nbInput type="text" name="user" formControlName="url" >
                  <input class="col" nbInput type="hidden" value="{{data}}" formControlName="name" >
                </div>
              </div>
              <div class="form-group row">
                <label for="inputEmail1" class="label col-sm-3 col-form-label">Api Key</label>
                <div class="col-sm-9">
                  <input class="col" nbInput type="password" name="api_key" formControlName="api_key" >
                </div>
              </div>
              <div class="col">
                <button nbButton (click)="closeModal()">Cancel</button>
              </div>
              <div class="col">
                <button type="submit" nbButton status="success">Update</button>
              </div>
            </div>
          </form>
        </nb-form-field>
      </nb-card-body>
    </nb-card>
  </ng-template>
  <ng-template #dialogCreateWebhook let-data let-ref="dialogCreateWebhook">
    <nb-card  >
      <nb-card-header>Create tool config</nb-card-header>
      <nb-card-body>
        <nb-form-field>
          <form  (ngSubmit)="this.updateTools($event,'Webhook')"  [formGroup]="toolsFormWebhook">
            <div class=" modaleBth row">
              <div class="form-group row">
                <label for="inputEmail1" class="label col-sm-3 col-form-label">Webhook</label>
                <div class="col-sm-9">
                  <input class="col" nbInput type="text" name="user" formControlName="webhook" >
                  <input class="col" nbInput type="hidden" value="{{data}}" formControlName="name" >
                </div>
              </div>
              <div class="col">
                <button nbButton (click)="closeModal()">Cancel</button>
              </div>
              <div class="col">
                <button type="submit" nbButton status="success">Update</button>
              </div>
            </div>
          </form>
        </nb-form-field>
      </nb-card-body>
    </nb-card>
  </ng-template>
  
  </nb-layout-column>



</nb-layout>